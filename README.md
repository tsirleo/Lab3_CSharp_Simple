# Лабораторная работа 3. Уровень 1.

В  лабораторной  работе  надо  сравнить  время  и  точность  вычислений  значений математических функций из пакета векторной математики математической библиотеки **Intel MKL** для различных режимов точности.  

Для одного и того же вектора аргументов надо вычислить значения функций синус и косинус с  помощью  функций  **vmdSin**,  **vmdCos**  и  **vmdSinCos**  из  пакета  векторной  математики библиотеки  **Intel  MKL**  для  режимов  точности  **VML\_HA**  и  **WML\_EP**  и  сравнить  время  и точность вычислений.  

В среде VisualStudio надо cоздать решение (solution) с двумя проектами: 

1. тип одного проекта – консольное приложение **C#**;  
1. тип второго проекта – Dll-библиотека **C++**.

В  Dll−библиотеке  **C++**  находится  глобальная  функция,  которая  вызывается  из  кода  **C#**  с использованием механизма **PInvoke.** Из этой глобальной функции  вызываются функции из библиотеки **Intel MKL**. 

Из кода **C#** через параметры глобальной функции передаются данные, которые необходимы для сравнения времени и точности вычислений. Через параметры глобальной функции в код **C#** возвращается код ошибки и результаты, необходимые для сравнения. 

В коде C# надо определить структуру **struct** **VMTime** для хранения результатов тестирования времени вычислений со свойствами 

- длина вектора аргументов функции; 
- время вычисления в режимах точности **VML\_HA** и **WML\_EP** для каждой из функций. 

Для  времени  вычислений  можно  определить  одно  или  несколько  свойств,  которые возвращают массив и/или отдельные значения для каждой из функций.  

В коде C# надо определить структуру **struct** **VMAccuracy** для хранения результатов сравнения точности  результатов  при  вычислении  значений  векторной  функции  **vmdSin**  в  режимах **VML\_HA** и **WML\_EP**. 

Чтобы сравнить точность, с которой вычисляются значения функции в режимах **VML\_HA** и **WML\_EP**, надо создать вектор аргументов функции, которые находятся на заданном отрезке, и передать его как параметр функции из библиотеки **Intel MKL**.  

В структуре **VMAccuracy** надо определить свойства, в которых хранятся  

- границы отрезка (одно свойство, которое содержит оба значения, или два свойства для каждой из границ); 
- длина вектора аргументов функции; 
- максимальное значение модуля разности значений, вычисленных в режмах **VML\_HA** и **WML\_EP**; 
- значение функции и значение аргумента функции, при котором значения функции, вычисленные в режимах  **VML\_HA** и **WML\_EP**, отличаются максимально (для однго из значений аргумента, если таких значений несколько). 

В коде C# определить класс **VMBenchmark**, который содержит  

- список **List<VMTime>** для хранения результатов тестирования времени; 
- список **List<VMAccuracy>** для хранения результатов сравнения точности вычисления функций; 
- метод,  через  параметры  которого  передаются  границы  отрезка  и  число  значений аргумента функции на отрезке; в этом методе создается вектор аргументов функции и вызывается глобальная функция из Dll-библиотеки С++, создаются и добавляются в списки **List<VMTime>** и **List<VMAccuracy>** объекты **VMTime** и **VMAccuracy**; 
- версию  метода  ToString(),  которая  формирует  строку  с  данными  всех  элементов списков  **List<VMTime>** и **List<VMAccuracy>;** 
- метод  с параметром типа **string** (имя файла), который записывает в файл в текстовом виде все элементы списков **List<VMTime>** и **List<VMAccuracy>** в режиме накопления, т.е. дописывает информацию в конец файла.  

В методе **Main()** надо создать объект типа **VMBenchmark** и вызвать метод для нескольких наборов значений параметров. Число точек на отрезке выбрать достаточно большим, чтобы можно было оценить разницу во времени вычислений для разных режимов. 

Записать результаты в файл. Этот файл с данными надо прислать вместе с проектом. 

В программе должны быть обработаны все исключения, которые могут быть брошены при выполнении приложения. 
